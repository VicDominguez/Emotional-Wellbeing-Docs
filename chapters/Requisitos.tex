\chapter{Análisis del sistema propuesto}
\label{chapter:analisis}

\chapquote{Cada día me gusta levantarme porque hay otro reto.}{Roger Penske}

\section{Introducción}

    \subsection{Propósito}
        El propósito de este capítulo consiste en la \gls{ers} correspondiente al proyecto desarrollado en este \gls{tfm}. Para la elaboración de la misma se ha tomado como base el estándar IEEE 830.

        Esta especificación recoge todas las características, objetivos, restricciones y suposiciones para el desarrollo del proyecto, definiendo claramente el sistema a desarrollar y sirviendo asimismo de referencia para la verificación y validación de la solución implementada. Para dicha definición en primer lugar serán documentadas qué restricciones, suposiciones y dependencias son asumidas para posteriormente determinar los requisitos de usuario, los requisitos no funcionales y por último los requisitos de interfaces externas.

        Por otra parte, dado que este proyecto tiene una naturaleza abierta y transparente, en especial al tratar datos sensibles; el público objetivo de esta especificación de requisitos es cualquier persona que desee conocer las características del sistema y sobre qué criterios, restricciones o supuestos ha sido diseñado, incrementando la confianza social en el proyecto.
        
    \subsection{Alcance}
        \label{req:intro:alcance}
        Como ya se mencionó en la Sección \ref{sec:objetivos}, el objetivo principal de este \gls{tfm} es la creación de un prototipo de un sistema que permita la detección precoz y la mejora de los trastornos de salud mental en la comunidad universitaria. 

        Este proyecto se fundamenta en la alarmante situación psicológica que atraviesa nuestra sociedad, partiendo de la premisa de que en numerosas ocasiones las personas desconocen factores, conductas o síntomas relacionados con problemas de salud mental, pero que mejorando la conciencia de los mismos se podría reducir el número y la gravedad de los casos.

        Para ello, este sistema se encargará de monitorizar y visualizar las medidas de estrés, soledad, depresión y suicidio, en base a cuestionarios que la persona rellene diariamente; planteándose un complemento para mejorar la sensibilidad de los usuarios sobre la evolución de su salud mental. Para ello, aportará consejos y remitiendo a un profesional cuando la situación del usuario sea delicada; quedando fuera del proyecto cuestiones como el asesoramiento médico profesional o una atención psicológica personalizada.

        Dichos consejos estarán personalizados para el nivel de gravedad (o ausencia de la misma) de cada medida, permitiendo además que el usuario pueda ver claramente cómo se ha sentido durante los últimos días, semanas o meses para cada variable.
        
        \todo[inline]{Revisar cómo hablamos de la comunidad}

        Por otra parte, para reducir la estigmatización que aún hoy se percibe de la Salud Mental, el sistema presentará al usuario una visualización de una serie de datos sobre estrés, soledad y depresión del resto de usuarios.

        Asimismo, la aplicación recopilará los datos de su dispositivo \gls{wearable} a los que el usuario haya dado acceso, con la finalidad de construir un conjunto de datos anonimizado con el que se pueda desarrollar un modelo predictivo de esas medidas, permitiendo un apoyo más integral al usuario. 

        Finalmente, tanto la información de los datos de las medidas del usuario como sus datos sanitarios, serán enviados a un servidor alojado en la universidad para su guardado únicamente en el caso de los datos sanitarios. En cuanto a las medidas de los usuarios, serán guardadas y procesadas para presentar al usuario las tendencias del resto de usuarios.

        
    \subsection{Estructura de la sección}
        \todo[inline]{No me gusta el nombre "estructura del documento", ya que es solo una parte...}

        Esta \gls{ers} se estructura de la siguiente forma:

        \begin{enumerate}
            \item En la Sección \ref{req:descripcion} se especifica la descripción general del producto a desarrollar. Para ello, se pone al usuario en contexto (Sección \ref{req:descripcion:perspectiva}), para continuar especificando los usuarios del producto (Sección \ref{req:descripcion:usuarios}). Tras ello se detallarán las restricciones generales del producto, sus suposiciones y dependencias en las secciones 
            \ref{req:descripcion:restricciones}, \ref{req:descripcion:suposiciones} y \ref{req:descripcion:dependencias} respectivamente.
            \item Posteriormente, en la Sección \ref{req:especificos} se detalla la especificación formal de los requisitos del proyecto propiamente dicha. En la Sección \ref{req:especificos:funcionales} se definirán los requisitos de los usuarios finales que especifican las necesidades de los mismos. Cada requisito de usuario será descompuesto en uno o más requisitos funcionales, mientras que los no funcionales estarán desglosados por categorías en la Sección \ref{req:especificos:no_funcionales}.
            \item Por último, en la Sección \ref{req:externas} se detallarán los requisitos de interfaces hardware y software que caracterizan las conexiones entre componentes (Secciones \ref{req:externas:hardware} y \ref{req:externas:software} respectivamente), y las restricciones de desarrollo en la Sección \ref{req:externas:restricciones}.
        \end{enumerate}
        
\section{Descripción general del producto}
    \label{req:descripcion}

    \subsection{Perspectiva del producto}
        \label{req:descripcion:perspectiva}

        Como se detalló en las secciones \ref{sec:objetivos} y 
        \ref{req:intro:alcance}, el objetivo principal de este \gls{tfm} es la creación de un prototipo de un Sistema para el Bienestar Emocional, sobre el cual pueda servir como punto de partida para proyectos de futuros alumnos, incorporando más funcionalidades y profundidad en las mismas sin necesidad de rehacer gran parte del trabajo. 

        Este prototipo, a través de su aplicación móvil, se apoyará en el sistema operativo Android para su posible uso en una enorme variedad de dispositivos móviles. Asimismo, a través de su \gls{sdk}, se interactuará con el sistema operativo para ciertos escenarios, como la planificación de tareas.

        Por otra parte, para la lectura de datos de los \glspl{wearable} nos apoyaremos en el nuevo componente de Android Salud Conectada (o Health Connect en inglés) Dicho componente nos permite la abstracción de los componentes hardware, delegando a los fabricantes la conexión de sus dispositivos con este sistema y unificando el acceso y uso de los datos de actividad física. La extracción de datos por otros canales queda fuera de este proyecto, ya que los cauces legales están fuertemente restringidos. 

        En cuando al procesamiento de los datos, será utilizado un servidor puesto a disposición por la Universidad como prototipo, no contemplándose ningún trabajo de despliegue en un escenario real del mismo.

        \todo[inline]{Hablamos aquí de que hemos tenido la colaboración/asesoría de dos psicólogas?}
        
        Por último, se busca que este sistema sea un marco para la investigación en el campo de la Psicología, permitiendo la realización de experimentos que necesiten acceso a datos de actividad física o cuestionarios.


    \subsection{Características de los usuarios finales}
        \label{req:descripcion:usuarios}
        
        Los usuarios finales de este sistema serán los miembros de la comunidad universitaria que deseen monitorizar su salud mental, sin necesidad de conocimientos específicos. No obstante, deberán de cumplir con las siguientes pautas:
    
        \begin{enumerate}
            \item Los usuarios dispondrán de un teléfono con sistema operativo Android, cuya versión cumpla la \ref{req:restriccion:android_minimo}.
            \item El usuario realizará de forma habitual los cuestionarios ofrecidos por la aplicación.
            \item El usuario estará dispuesto a que sus respuestas a los cuestionarios sean subidas a un servidor de la universidad, con un identificador de usuario anónimo.
            \item Opcionalmente, el usuario dispondrá de un dispositivo \gls{wearable} compatible con \textit{Salud Conectada}, con la aplicación del fabricante\footnote{A fecha de realización de este proyecto, los fabricantes que garantizan compatiblidad con este ecosistema son Fitbit o Samsung} correspondiente instalada y el dispositivo conectado a su teléfono.
            
        \end{enumerate}
        
    \subsection{Restricciones generales}
        \label{req:descripcion:restricciones}
        Debido funcionalmente a los componentes en los que se apoya el proyecto para ser implementable, es necesario definir ciertas restricciones generales.
        \begin{enumerate}[label=\textbf{RG-\arabic*}]
            \item \label{req:restriccion:android_referencia} La aplicación se ejecutará sobre el sistema operativo Android. Concretamente, se tomará Android 14 como referencia.
            \item \label{req:restriccion:android_minimo} La aplicación especificará Android 9 como versión mínima, pudiéndose ejecutar la aplicación en cualquier versión entre la mínima y la referente.
        \end{enumerate}
    
    \subsection{Suposiciones}
        \label{req:descripcion:suposiciones}

        \begin{enumerate}[label=\textbf{SUP-\arabic*}]
            \item El usuario de la aplicación dispone de conexión a Internet de forma habitual.
            \item El usuario de la aplicación es el mismo que utiliza el dispositivo \gls{wearable}.
            \item Las respuestas del usuario a los cuestionarios son veraces y verídicas.
            \item El usuario rellena frecuentemente los cuestionarios.
            \item El usuario utiliza con cierta asiduidad el dispositivo \gls{wearable}.
            \item El servidor donde se aloja el componente homónimo está disponible.
            \item El usuario desactiva el ahorro de batería relativo a la aplicación, para que la optimización de energía del sistema operativo no interfiera con la aplicación en determinados escenarios.
            \item Se supone que habrá más de un usuario utilizando la aplicación diariamente.
            \item Se supone que el dispositivo móvil que ejecute la aplicación es un teléfono móvil o una tableta, no otros dispositivos Android como televisores o bajo emulación, los cuales teóricamente podrían ejecutar la aplicación.
        \end{enumerate}
        
    \subsection{Dependencias}
        \label{req:descripcion:dependencias}
    
        \begin{enumerate}[label=\textbf{DEP-\arabic*}]
            \item \label{req:dependencias:integracion_correcta} Para la lectura de los datos del dispositivo \gls{wearable}, el fabricante debe integrar su aplicación móvil correcta y completamente con el \gls{framework} \textit{Salud Conectada}.
            \item En relación con \ref{req:dependencias:integracion_correcta}, el \gls{wearable} del usuario escribirá en \textit{Salud Conectada} los datos recogidos.
            \item \label{req:dependencias:planificacion} Para la ejecución de las tareas recurrentes, es necesario que el sistema operativo otorgue recursos de ejecución a la aplicación.
        \end{enumerate}

\section{Requisitos específicos}
    \label{req:especificos}

    \subsection{Requisitos funcionales}
        \label{req:especificos:funcionales}

        \todo[inline]{El permiso de notificaciones solo se ha detallado una vez, ya que se reusa por toda la app}

        \newlist{req-usuario}{enumerate}{1}
        \newlist{req-funcionales}{enumerate}{1}

        \begin{enumerate}[series=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero realizar un seguimiento del estrés para controlar mi evolución del mismo.
            \begin{enumerate}[series=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El seguimiento del estrés se realizará mediante cuestionarios diarios y puntuales.
                \item Se realizará un cuestionario matutino diario de estrés, diseñado a tal efecto.
                \item Se realizará un cuestionario vespertino diario de estrés, diseñado a tal efecto.
                \item El cuestionario puntual para el seguimiento del estrés será el PSS-14.
                \item La medida estrés estará calibrada en tres umbrales: baja, moderada y alta.
                \item Para cada umbral de la medida estrés se dispondrá de al menos un mensaje o recomendación.
                \item La creación de cada cuestionario de estrés será notificada al usuario.
                \item El usuario podrá terminar un cuestionario en curso en otro momento.
                \item La aplicación mostrará al usuario si dispone de cuestionarios de estrés por completar para su finalización.
                \item Al finalizar un cuestionario de estrés, se le presentará al usuario el resultado numérico del mismo.
                \item Al finalizar un cuestionario de estrés, se le presentará al usuario el resultado categórico del mismo.
                \item Al finalizar un cuestionario de estrés, se le presentará al usuario un consejo o recomendación según su nivel de estrés.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero realizar un seguimiento de la depresión para controlar mis niveles de la misma.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El seguimiento del depresión se realizará mediante cuestionarios diarios y puntuales.
                \item Se realizará un cuestionario matutino diario de depresión, diseñado a tal efecto.
                \item Se realizará un cuestionario vespertino diario de depresión, diseñado a tal efecto.
                \item El cuestionario puntual para el seguimiento del depresión será el PHQ-9.
                \item La medida depresión estará calibrada en tres umbrales: baja, moderada y alta.
                \item Para cada umbral de la medida depresión se dispondrá de al menos un mensaje o recomendación.
                \item La creación de cada cuestionario de depresión será notificada al usuario.
                \item La aplicación solicitará al usuario explícitamente el permiso de envío de notificaciones.
                \item El usuario podrá terminar un cuestionario en curso en otro momento.
                \item La aplicación mostrará al usuario si dispone de cuestionarios de depresión por completar para su finalización.
                \item Al finalizar un cuestionario de depresión, se le presentará al usuario el resultado numérico del mismo.
                \item Al finalizar un cuestionario de depresión, se le presentará al usuario el resultado categórico del mismo.
                \item Al finalizar un cuestionario de depresión, se le presentará al usuario un consejo o recomendación según su nivel de depresión.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero realizar un seguimiento de la soledad para controlar mis niveles de la misma.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El seguimiento del soledad se realizará mediante cuestionarios diarios y puntuales.
                \item Se realizará un cuestionario matutino diario de soledad, diseñado a tal efecto.
                \item Se realizará un cuestionario vespertino diario de soledad, diseñado a tal efecto.
                \item El cuestionario puntual para el seguimiento del soledad será el UCLA-20
                \item La medida soledad estará calibrada en tres umbrales: baja, moderada y alta.
                \item Para cada umbral de la medida soledad se dispondrá de al menos un mensaje o recomendación.
                \item La creación de cada cuestionario de soledad será notificada al usuario.
                \item El usuario podrá terminar un cuestionario en curso en otro momento.
                \item La aplicación mostrará al usuario si dispone de cuestionarios de soledad por completar para su finalización.
                \item Al finalizar un cuestionario de soledad, se le presentará al usuario el resultado numérico del mismo.
                \item Al finalizar un cuestionario de soledad, se le presentará al usuario el resultado categórico del mismo.
                \item Al finalizar un cuestionario de soledad, se le presentará al usuario un consejo o recomendación según su nivel de soledad.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero realizar un seguimiento del riesgo de suicidio para controlar mi nivel del mismo.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El seguimiento del riesgo de suicidio se realizará mediante cuestionarios diarios.
                \item Se realizará un cuestionario matutino diario de riesgo de suicidio, diseñado a tal efecto.
                \item Se realizará un cuestionario vespertino diario de riesgo de suicidio, diseñado a tal efecto.
                \item La medida de riesgo de suicidio estará calibrada en tres umbrales: bajo, moderado y alto.
                \item Para cada umbral de la medida riesgo de suicidio se dispondrá de al menos un mensaje o recomendación.
                \item La creación de cada cuestionario de riesgo de suicidio será notificada al usuario.
                \item El usuario podrá terminar un cuestionario en curso en otro momento.
                \item La aplicación mostrará al usuario si dispone de cuestionarios de riesgo de suicidio por completar para su finalización.
                \item Al finalizar un cuestionario de estrés, se le presentará al usuario un consejo o recomendación según su nivel de estrés.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero visualizar el nivel más reciente del estrés fácilmente para recordarlo.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item La aplicación mostrará al usuario el resultado numérico del último cuestionario de estrés.
                \item La aplicación mostrará al usuario el nivel categórico del último cuestionario de estrés.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero visualizar el nivel más reciente de la depresión fácilmente para recordarlo.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item La aplicación mostrará al usuario el resultado numérico del último cuestionario de depresión.
                \item La aplicación mostrará al usuario el nivel categórico del último cuestionario de depresión.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero visualizar el nivel más reciente de soledad fácilmente para recordarlo.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item La aplicación mostrará al usuario el resultado numérico del último cuestionario de soledad.
                \item La aplicación mostrará al usuario el nivel categórico del último cuestionario de soledad.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero disponer de al menos un consejo para cada nivel de estrés para saber cómo reducirlo en cada momento.
            \todo[inline]{Estos niveles serían categóricos, no numéricos, queda claro o hay que matizar?}
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item La aplicación mostrará un consejo sobre el nivel de estrés registrado al terminar un cuestionario.
                \item En la visualización de la última medición de estrés se podrá consultar un consejo sobre el mismo. 
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero disponer de al menos un consejo para cada nivel de depresión para saber cómo reducirlo en cada momento.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item La aplicación mostrará un consejo sobre el nivel de depresión registrado al terminar un cuestionario.
                \item En la visualización de la última medición de depresión se podrá consultar un consejo sobre el mismo.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero disponer de al menos un consejo para cada nivel de soledad para saber cómo reducirlo en cada momento.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item La aplicación mostrará un consejo sobre el nivel de soledad registrado al terminar un cuestionario.
                \item En la visualización de la última medición de soledad se podrá consultar un consejo sobre el mismo. 
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero disponer de al menos un consejo para cada nivel de riesgo de suicidio para saber cómo reducirlo en cada momento.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item La aplicación mostrará un consejo sobre el nivel de riesgo de suicidio registrado al terminar un cuestionario.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero visualizar la evolución de mis registros de estrés para observarla a lo largo del tiempo.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El usuario podrá visualizar sus estadísticas de estrés agrupadas por día.
                \item El usuario podrá visualizar sus estadísticas de estrés agrupadas por semana.
                \item El usuario podrá visualizar sus estadísticas de estrés agrupadas por mes.
                \item El usuario podrá escoger el intervalo de tiempo sobre el cual desea consultar sus estadísticas de estrés.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero visualizar la evolución de mis registros de depresión para observarla a lo largo del tiempo.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El usuario podrá visualizar sus estadísticas de depresión agrupadas por día.
                \item El usuario podrá visualizar sus estadísticas de depresión agrupadas por semana.
                \item El usuario podrá visualizar sus estadísticas de depresión agrupadas por mes.
                \item El usuario podrá escoger el intervalo de tiempo sobre el cual desea consultar sus estadísticas de depresión.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero visualizar la evolución de mis registros de soledad para observarla a lo largo del tiempo.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El usuario podrá visualizar sus estadísticas de soledad agrupadas por día.
                \item El usuario podrá visualizar sus estadísticas de soledad agrupadas por semana.
                \item El usuario podrá visualizar sus estadísticas de soledad agrupadas por mes.
                \item El usuario podrá escoger el intervalo de tiempo sobre el cual desea consultar sus estadísticas de soledad.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, deseo consultar estadísticas de estrés de la comunidad de usuarios para poner en contexto mis niveles y apreciar la evolución de la comunidad.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El usuario podrá visualizar la media de estrés de los usuarios del día anterior.
                \item La media de los cuestionarios de estrés del día anterior se realizará a partir de todos los cuestionarios completados que haya recibido el servido de los usuarios.
                \item El usuario podrá visualizar la media de estrés de los usuarios de los últimos siete días.
                \item La media de los cuestionarios de estrés de los últimos siete días se realizará a partir de todos los cuestionarios completados que haya recibido el servido de los usuarios.
                \item El usuario podrá visualizar la media de estrés de los usuarios de la semana actual.
                \item La media de los cuestionarios de estrés de la semana actual se realizará a partir de todos los cuestionarios completados que haya recibido el servido de los usuarios.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, deseo consultar estadísticas de depresión de la comunidad de usuarios para poner en contexto mis niveles y apreciar la evolución de la comunidad.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El usuario podrá visualizar la media de depresión de los usuarios del día anterior.
                \item La media de los cuestionarios de depresión del día anterior se realizará a partir de todos los cuestionarios completados que haya recibido el servido de los usuarios.
                \item El usuario podrá visualizar la media de depresión de los usuarios de los últimos siete días.
                \item La media de los cuestionarios de depresión de los últimos siete días se realizará a partir de todos los cuestionarios completados que haya recibido el servido de los usuarios.
                \item El usuario podrá visualizar la media de depresión de los usuarios de la semana actual.
                \item La media de los cuestionarios de depresión de la semana actual se realizará a partir de todos los cuestionarios completados que haya recibido el servido de los usuarios.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, deseo consultar estadísticas de soledad de la comunidad de usuarios para poner en contexto mis niveles y apreciar la evolución de la comunidad.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El usuario podrá visualizar la media de soledad de los usuarios del día anterior.
                \item La media de los cuestionarios de soledad del día anterior se realizará a partir de todos los cuestionarios completados que haya recibido el servido de los usuarios.
                \item El usuario podrá visualizar la media de soledad de los usuarios de los últimos siete días.
                \item La media de los cuestionarios de soledad de los últimos siete días se realizará a partir de todos los cuestionarios completados que haya recibido el servido de los usuarios.
                \item El usuario podrá visualizar la media de soledad de los usuarios de la semana actual.
                \item La media de los cuestionarios de soledad de la semana actual se realizará a partir de todos los cuestionarios completados que haya recibido el servido de los usuarios.
            \end{enumerate}
        \end{enumerate}
        
        \todo[inline]{Desnivel ganado es la traducción oficial de elevation gained pero suena horrible, mejor traducción?}
        \todo[inline]{Plantas subidas es la traducción oficial de floors climbed pero suena horrible, mejor traducción?} 
            
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, quiero visualizar mis los datos de actividad física recogidos por la aplicación.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item La aplicación solicitará al usuario explícitamente el permiso de lectura de datos de distancia recorrida.
                \item La aplicación solicitará al usuario explícitamente el permiso de lectura de datos de desnivel ganado.
                \item La aplicación solicitará al usuario explícitamente el permiso de lectura de datos de sesiones de ejercicio.
                \item La aplicación solicitará al usuario explícitamente el permiso de lectura de datos de plantas subidas.
                \item La aplicación solicitará al usuario explícitamente el permiso de lectura de datos de frecuencia cardíaca.
                \item La aplicación solicitará al usuario explícitamente el permiso de lectura de datos de sueño.
                \item La aplicación solicitará al usuario explícitamente el permiso de lectura de datos de pasos realizados.
                \item La aplicación solicitará al usuario explícitamente el permiso de lectura de datos de calorías quemadas.
                \item La aplicación solicitará al usuario explícitamente el permiso de lectura de datos de peso corporal.
                \item La aplicación extraerá del dispositivo \gls{wearable} datos de distancia recorrida por el usuario.
                \item La aplicación extraerá del dispositivo \gls{wearable} datos de desnivel ganado por el usuario.
                \item La aplicación extraerá del dispositivo \gls{wearable} datos de las sesiones de ejercicio realizadas por el usuario.
                \item La aplicación extraerá del dispositivo \gls{wearable} datos de las plantas subidas por el usuario.
                \item La aplicación extraerá del dispositivo \gls{wearable} datos de la frecuencia cardíaca del usuario.
                \item La aplicación extraerá del dispositivo \gls{wearable} datos de sueño del usuario.
                \item La aplicación extraerá del dispositivo \gls{wearable} datos de los pasos realizados por el usuario.
                \item La aplicación extraerá del dispositivo \gls{wearable} datos de las calorías quemadas por el usuario.
                \item La aplicación extraerá del dispositivo \gls{wearable} datos de peso del usuario.
                \item La aplicación dispondrá de un panel para visualizar los datos recogidos de distancia recorrida.
                \item La aplicación dispondrá de un panel para visualizar los datos recogidos de desnivel ganado.
                \item La aplicación dispondrá de un panel para visualizar los datos recogidos de sesiones de ejercicio.
                \item La aplicación dispondrá de un panel para visualizar los datos recogidos de plantas subidas.
                \item La aplicación dispondrá de un panel para visualizar los datos recogidos de frecuencia cardíaca.
                \item La aplicación dispondrá de un panel para visualizar los datos recogidos de sueño.
                \item La aplicación dispondrá de un panel para visualizar los datos recogidos de pasos realizados.
                \item La aplicación dispondrá de un panel para visualizar los datos recogidos de calorías quemadas.
                \item La aplicación dispondrá de un panel para visualizar los datos recogidos de peso.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, me gustaría utilizar la aplicación sin necesidad de disponer de Internet para garantizar el uso de la misma en todo momento.
            %\begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \todo[inline]{Deriva únicamente en requisitos no funcionales? Tiene sentido tener un requisito de usuario que no deriva en funcionales verdad?}
            %\end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como usuario, me gustaría disponer de una interfaz que me permita usar fácilmente la aplicación en cualquier dispositivo.
            %\begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                 \todo[inline]{Deriva únicamente en requisitos no funcionales? Tiene sentido tener un requisito de usuario que no deriva en funcionales verdad?}
            %\end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como analista de datos, quiero poder consultar los datos de estrés recogidos de todos los usuarios para utilizarlos en investigación.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                 \item Para cada cuestionario de estrés diario se guardará un identificador del mismo, el instante de creación, el instante de la última modificación, si está completado o no, la puntuación numérica, el nivel categórico y la opción marcada para cada pregunta.
                \item Para cada cuestionario de estrés puntual se guardará un identificador del mismo, el instante de creación, el instante de la última modificación, si está completado o no, la puntuación numérica, el nivel categórico y la opción marcada para cada pregunta.
                \item El servidor recogerá de cada usuario sus cuestionarios de estrés finalizados, agrupados por identificador de usuario.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como analista de datos, quiero poder consultar los datos de depresión recogidos  de todos los usuarios para utilizarlos en investigación.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                 \item Para cada cuestionario de depresión diario se guardará un identificador del mismo, el instante de creación, el instante de la última modificación, si está completado o no, la puntuación numérica, el nivel categórico y la opción marcada para cada pregunta.
                \item Para cada cuestionario de depresión puntual se guardará un identificador del mismo, el instante de creación, el instante de la última modificación, si está completado o no, la puntuación numérica, el nivel categórico y la opción marcada para cada pregunta.
                \item El servidor recogerá de cada usuario sus cuestionarios de depresión finalizados, agrupados por identificador de usuario.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como analista de datos, quiero poder consultar los datos de soledad recogidos de todos los usuarios  para utilizarlos en investigación.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item Para cada cuestionario de soledad diario se guardará un identificador del mismo, el instante de creación, el instante de la última modificación, si está completado o no, la puntuación numérica, el nivel categórico y la opción marcada para cada pregunta.
                \item Para cada cuestionario de soledad puntual se guardará un identificador del mismo, el instante de creación, el instante de la última modificación, si está completado o no, la puntuación numérica, el nivel categórico y la opción marcada para cada pregunta.
                \item El servidor recogerá de cada usuario sus cuestionarios de soledad finalizados, agrupados por identificador de usuario.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como analista de datos, quiero poder consultar los datos de riesgo de suicidio  de todos los usuarios recogidos para utilizarlos en investigación.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item Para cada cuestionario de riesgo de suicidio se guardará un identificador del mismo, el instante de creación, el instante de la última modificación, si está completado o no y la opción marcada para cada pregunta.
                \item El servidor recogerá de cada usuario sus cuestionarios de riesgo de suicidio finalizados, agrupados por identificador de usuario.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como analista de datos quiero un cuestionario contraste para validar la percepción general de la persona.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item Para cada cuestionario de contraste diario se guardará un identificador del mismo, el instante de creación, el instante de la última modificación, si está completado o no, y los siguientes niveles del usuario de ese día: apetito, energía, descanso, concentración, líbido y dolor físico. 
                \item El servidor recogerá de cada usuario sus cuestionarios de contraste finalizados, agrupados por identificador de usuario.
            \end{enumerate}
        \end{enumerate}
        \begin{enumerate}[resume=req-usuario,label=\textbf{\texttt{RU-\arabic*}}]
            \item Como analista de datos, quiero poder consultar los datos de actividad física recogidos de todos los usuarios para correlacionarlos con los niveles de estrés, depresión, soledad y riesgo de suicidio.
            \begin{enumerate}[resume=req-funcionales,label=\textbf{\texttt{RF-\arabic*}}]
                \item El servidor recogerá de cada usuario sus datos de actividad física, agrupados por identificador de usuario.
                \item Para cada dato de distancia recorrida se guardará la medida en metros y el intervalo de tiempo donde se efectuó la medida.
                \item Para cada dato de desnivel ganado se guardará la medida en metros y el intervalo de tiempo donde se efectuó la medida.
                \item Para cada dato de las sesiones de ejercicio realizadas se guardará el tipo de ejercicio realizado y el intervalo de tiempo donde se realizó dicho ejercicio.
                \item Para cada dato de las plantas subidas se guardará la medida y el intervalo de tiempo donde se efectuó dicha medición.
                \item Para cada dato de la frecuencia cardíaca se guardará una lista de mediciones en formato instante, pulsaciones; y el intervalo de tiempo al que pertenecen las mediciones.
                \item Para cada dato de sueño se guardará una lista de mediciones en formato instante, fase del sueño; y el intervalo de tiempo donde se efectuó la medida.
                \item Para cada dato de los pasos realizados se guardará la medida y el intervalo de tiempo donde se efectuó dicha medición.
                \item Para cada dato de datos de las calorías quemadas se guardará la medida en kilocalorías (kcal) y el intervalo de tiempo donde se efectuó la medida.
                \item Para cada dato de peso se guardará la medida en kilogramos (kg) y el instante de tiempo donde se efectuó la medición.
            \end{enumerate}
        \end{enumerate}
        
    
    \subsection{Requisitos no funcionales}
        \label{req:especificos:no_funcionales}
        \subsubsection{Acurracy}
            \todo[inline]{Placeholder por si ves necesario añadir alguno.}
        \subsubsection{Availability}
            \todo[inline]{Placeholder por si ves necesario añadir alguno.}
        \subsubsection{Eficiencia (Efficiency)}
            \begin{enumerate}[label=\textbf{\texttt{RNF-\arabic*}}]
                \item La aplicación sólo intentará enviar datos al servidor cuando se disponga de conexión a Internet.
                \item Si en el momento de envío de datos el dispositivo no dispone de conexión a Internet, se aplazará la subida de los mismos para para realizarse en cuanto se disponga de conexión.
                \item En cada envío de datos la aplicación sólo enviará los datos recogidos desde el último envío.
            \end{enumerate}
        \subsubsection{Extensibilidad (Extensibility)}
            \begin{enumerate}[resume, label=\textbf{\texttt{RNF-\arabic*}}]
                \item El diseño y la aplicación garantizarán, en la medida de lo posible, el soporte a nuevas versiones de Android.
                \item El diseño y la aplicación garantizarán, en la medida de lo posible, la incorporación y/o eliminación de tipos de datos de actividad física.
            \end{enumerate}
        \subsubsection{Interoperabilty}
            \todo[inline]{Placeholder por si ves necesario añadir alguno.}
        \subsubsection{Mantenibilidad (Maintainability)}
            \begin{enumerate}[resume, label=\textbf{\texttt{RNF-\arabic*}}]
                \item Se desarrollará el código software siguiendo los principios S.O.L.I.D.
            \end{enumerate}
            \paragraph{Instalabilidad (Installability)}
                \begin{enumerate}[resume, label=\textbf{\texttt{RNF-\arabic*}}]
                    \item La aplicación notificará al usuario si necesita instalar el componente \textit{Health Connect} para los dispositivos con versiones de Android inferiores a la 14.
                \end{enumerate}
        \subsubsection{Rendimiento (Performance)}
            \begin{enumerate}[resume, label=\textbf{\texttt{RNF-\arabic*}}]
                \item Los cuestionarios diarios de mañana serán creados a las 9:00 horas.
                \item Los cuestionarios diarios de noche serán creados a las 21:00 horas.
                \item Los cuestionarios puntuales serán creados a las 15:00 horas.
                \item La aplicación subirá al servidor los datos de actividad física cada 8 horas.
                \item La aplicación subirá al servidor los datos de los cuestionarios diarios terminados cada 8 horas.
                \item La aplicación subirá al servidor los datos de los cuestionarios puntuales terminados cada 8 horas.
                \item La aplicación guardará cuándo se realizó con éxito la última subida de datos para procesar únicamente los datos nuevos desde ese momento.
            \end{enumerate}
        \subsubsection{Portabilidad (Portability)}
            \begin{enumerate}[resume, label=\textbf{\texttt{RNF-\arabic*}}]
                \item La aplicación deberá funcionar en cualquier dispositivo móvil o tableta Android, que cumpla las restricciones \ref{req:restriccion:android_referencia} y \ref{req:restriccion:android_minimo}.
                \item La aplicación deberá poder leer los datos de cualquier dispositivo \gls{wearable} que haya integrado el fabricante del mismo con \textit{Health Connect}.
            \end{enumerate}
        \subsubsection{Recoverability}
            \todo[inline]{Placeholder por si ves necesario añadir alguno.}
        \subsubsection{Reusability}
            \todo[inline]{Placeholder por si ves necesario añadir alguno.}
        \subsubsection{Robustness}
            \todo[inline]{Placeholder por si ves necesario añadir alguno.}
        \subsubsection{Seguridad (Safety)}
            \begin{enumerate}[resume, label=\textbf{\texttt{RNF-\arabic*}}]
                \item El identificador de usuario será generado aleatoriamente por la aplicación para garantizar la anonimidad del mismo.  
                \item La base de datos de la aplicación estará cifrada con el algoritmo \gls{aes}, usando el modo de cifrado \gls{gcm}.
                \item La aplicación garantizará la inmutabilidad de los datos de los cuestionarios completados.
                \todo[inline]{Los siguientes son un brindis al sol?}
                \item El acceso a los datos anonimizados de los usuarios solo estará permitido para propósitos científicos.
                \item El servidor que aloje los datos anonimizados deberá estar protegido antes ataques de denegación de servicio y accesos no autorizados.
            \end{enumerate}
        \subsubsection{Scalability}
            \todo[inline]{Placeholder por si ves necesario añadir alguno.}
        \subsubsection{Security / Integrity}
            \begin{enumerate}[resume, label=\textbf{\texttt{RNF-\arabic*}}]
                \item Las comunicaciones entre aplicación y servidor deberán estar cifradas.
                \item Se deberá definir una política de privacidad de acuerdo al \gls{rgpd} \cite{publications_office_of_the_european_union_reglamento_nodate} y a las directrices de \textit{Salud Conectada} \cite{google_preguntas_nodate}.
            \end{enumerate}
        \subsubsection{Usabilidad (Usability)}
            \begin{enumerate}[resume, label=\textbf{\texttt{RNF-\arabic*}}]
                \item La interfaz gráfica será diseñada de forma \gls{responsive}.
                \item La interfaz de usuario deberá adaptarse, en la medida de lo posible, al tamaño de la pantalla del dispositivo móvil.
                \item La interfaz de usuario deberá permitir el uso de la aplicación con la pantalla en posición tanto vertical como horizontal.
                \item La interfaz de usuario de la aplicación deberá adaptarse en tiempo real al cambio de orientación de la pantalla.
                \item La aplicación deberá contar con una sección de bienvenida para introducir al usuario los aspectos más relevantes de la aplicación.
                \item El usuario podrá visualizar la sección de bienvenida en cualquier momento.
            \end{enumerate}
            
            \paragraph{Accesibilidad (Accessibility)}
                \begin{enumerate}[resume, label=\textbf{\texttt{RNF-\arabic*}}]
                    \item Se deberá garantizar un contraste entre los elementos gráficos de 3:1 $\frac{cd}{m^{2}}$ o nits, en concordancia con la guía de accesibilidad \gls{wcag} 2.0 del consorcio \gls{w3c}\cite{w3c_web_2008}.
                    \item La paleta de colores de la aplicación deberá transmitir tranquilidad al usuario.
                    \item El diseño de la interfaz de usuario contemplará dos ajustes de colores principales: modo claro y oscuro.
                    \item La aplicación tomará por defecto el modo de colores general del sistema.
                    \item El usuario podrá cambiar el modo de colores de la aplicación en todo momento. 
                    \item La aplicación ofrecerá la posibilidad, en los dispositivos móviles que lo soporten, la posibilidad de usar un esquema de colores basado en el fondo de pantalla del dispositivo.
                \end{enumerate}
                
                \subparagraph{Internacionalidad (Internationality)}
                    \begin{enumerate}[resume, label=\textbf{\texttt{RNF-\arabic*}}]
                        \item La aplicación estará disponible en el idioma español.
                        \item La aplicación estará disponible en el idioma inglés.
                        \item La aplicación usará como idioma por defecto el español.
                    \end{enumerate}
\section{Requisitos de Interfaces Externas}
    \label{req:externas}

    \subsection{Interfaces Hardware}
        \label{req:externas:hardware}

        \begin{enumerate}[label=\textbf{\texttt{RIS-\arabic*}}]
            \item El sistema podrá utilizar como dispositivo \gls{wearable} cualquiera que sea compatible con el \gls{framework} de Android \textit{Salud Conectada}.
        \end{enumerate}
    
    \subsection{Interfaces Software}
        \label{req:externas:software}
        \begin{enumerate}[label=\textbf{\texttt{RIS-\arabic*}}]
            \item La comunicación con los dispositivos \glspl{wearable} se realizará mediante el \gls{framework} de Android \textit{Salud Conectada}.
            \item La planificación y ejecución de tareas periódicas de la aplicación se realizará mediante el componente de Android \textit{Work Manager}, satisfaciendo \ref{req:dependencias:planificacion}.
            \item \label{req:externas:api} La comunicación entre aplicación móvil y servidor se implementará mediante una API REST.
        \end{enumerate}
    \subsection{Restricciones de desarrollo}
        \label{req:externas:restricciones}
        \begin{enumerate}[label=\textbf{\texttt{RD-\arabic*}}]
            \item Para la realización de pruebas, se utilizará como \gls{wearable} la pulsera Fitbit Inspire 2.
            \item La aplicación será implementada utilizando el lenguaje de programación Kotlin.
            \item El componente servidor será implementado mediante el lenguaje de programación Python.
            \item Para el diseño de interfaces de usuario, se utilizará el sistema \textit{Material Design 3}.
            \item Para la implementación de \ref{req:externas:api}, se utilizará la librería \textit{Retrofit}.
            \item Para el guardado local de los datos del usuario, se utilizará una base de datos relacional implementada mediante la librería \textit{Room}.
            \item Para el guardado de los datos en el servidor, se utilizará el \gls{sgbd} Mongo DB.
            \item La visualización de estadísticas se realizará utilizando la librería \textit{Vico}.
        \end{enumerate}
        